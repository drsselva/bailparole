!function(c,t,H,e){"use strict";var a="webuiPopover",p="webui-popover",f="webui.popover",i={placement:"auto",width:"auto",height:"auto",trigger:"click",style:"",delay:{show:null,hide:null},async:{before:null,success:null},cache:!0,multi:!1,arrow:!0,title:"",content:"",closeable:!1,padding:!0,url:"",type:"html",animation:null,template:'<div class="webui-popover"><div class="arrow"></div><div class="webui-popover-inner"><a href="#" class="close">&times;</a><h3 class="webui-popover-title"></h3><div class="webui-popover-content"><i class="icon-refresh"></i> <p>&nbsp;</p></div></div></div>',backdrop:!1,dismissible:!0,onShow:null,onHide:null,abortXHR:!0,autoHide:!1,offsetTop:0,offsetLeft:0},l=[],s=c('<div class="webui-popover-backdrop"></div>'),o=0,g=!1,_=-2e3,n=c(H),h=function(t,e){return isNaN(t)?e||0:Number(t)},d=function(){for(var t=0;t<l.length;t++)l[t].webuiPopover("hide");n.trigger("hiddenAll."+f)};function r(t,e){this.$element=c(t),e&&("string"!==c.type(e.delay)&&"number"!==c.type(e.delay)||(e.delay={show:e.delay,hide:e.delay})),this.options=c.extend({},i,e),this._defaults=i,this._name=a,this._targetclick=!1,this.init(),l.push(this.$element)}r.prototype={init:function(){"click"===this.getTrigger()?this.$element.off("click touchend").on("click touchend",c.proxy(this.toggle,this)):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave click").on("mouseenter",c.proxy(this.mouseenterHandler,this)).on("mouseleave",c.proxy(this.mouseleaveHandler,this)),this._poped=!1,this._inited=!0,this._opened=!1,this._idSeed=o,this.options.backdrop&&s.appendTo(H.body).hide(),o++,"sticky"===this.getTrigger()&&this.show()},destroy:function(){for(var t=-1,e=0;e<l.length;e++)if(l[e]===this.$element){t=e;break}l.splice(t,1),this.hide(),this.$element.data("plugin_"+a,null),"click"===this.getTrigger()?this.$element.off("click"):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave"),this.$target&&this.$target.remove()},hide:function(t,e){if((t||"sticky"!==this.getTrigger())&&this._opened){e&&(e.preventDefault(),e.stopPropagation()),this.xhr&&!0===this.options.abortXHR&&(this.xhr.abort(),this.xhr=null);var i=c.Event("hide."+f);if(this.$element.trigger(i,[this.$target]),this.$target){this.$target.removeClass("in").addClass(this.getHideAnimation());var o=this;setTimeout(function(){o.$target.hide()},300)}this.options.backdrop&&s.hide(),this._opened=!1,this.$element.trigger("hidden."+f,[this.$target]),this.options.onHide&&this.options.onHide(this.$target)}},resetAutoHide:function(){var t=this,e=t.getAutoHide();e&&(t.autoHideHandler&&clearTimeout(t.autoHideHandler),t.autoHideHandler=setTimeout(function(){t.hide()},e))},toggle:function(t){t&&(t.preventDefault(),t.stopPropagation()),this[this.getTarget().hasClass("in")?"hide":"show"]()},hideAll:function(){d()},show:function(){var t=this.getTarget().removeClass().addClass(p).addClass(this._customTargetClass);this.options.multi||this.hideAll(),this._opened||(this.getCache()&&this._poped&&""!==this.content||(this.content="",this.setTitle(this.getTitle()),this.options.closeable||t.find(".close").off("click").remove(),this.isAsync()?this.setContentASync(this.options.content):this.setContent(this.getContent()),t.show()),this.displayContent(),this.options.onShow&&this.options.onShow(t),this.bindBodyEvents(),this.options.backdrop&&s.show(),this._opened=!0,this.resetAutoHide())},displayContent:function(){var t,e=this.getElementPosition(),i=this.getTarget().removeClass().addClass(p).addClass(this._customTargetClass),o=this.getContentElement(),s=i[0].offsetWidth,n=i[0].offsetHeight,h=c.Event("show."+f);this.$element.trigger(h,[i]),"auto"!==this.options.width&&i.width(this.options.width),"auto"!==this.options.height&&o.height(this.options.height),this.options.style&&this.$target.addClass(p+"-"+this.options.style),this.options.arrow||i.find(".arrow").remove(),i.detach().css({top:_,left:_,display:"block"}),this.getAnimation()&&i.addClass(this.getAnimation()),i.appendTo(H.body),t=this.getPlacement(e),this.$element.trigger("added."+f),this.initTargetEvents(),this.options.padding||("auto"!==this.options.height&&o.css("height",o.outerHeight()),this.$target.addClass("webui-no-padding")),s=i[0].offsetWidth,n=i[0].offsetHeight;var r=this.getTargetPositin(e,t,s,n);if(this.$target.css(r.position).addClass(t).addClass("in"),"iframe"===this.options.type){var a=i.find("iframe");a.width(i.width()).height(a.parent().height())}if(this.options.arrow||this.$target.css({margin:0}),this.options.arrow){var l=this.$target.find(".arrow");l.removeAttr("style"),r.arrowOffset&&(-1===r.arrowOffset.left||-1===r.arrowOffset.top?l.hide():l.css(r.arrowOffset))}this._poped=!0,this.$element.trigger("shown."+f,[this.$target])},isTargetLoaded:function(){return 0===this.getTarget().find("i.glyphicon-refresh").length},getTriggerElement:function(){return this.$element},getTarget:function(){if(!this.$target){var t=a+this._idSeed;this.$target=c(this.options.template).attr("id",t).data("trigger-element",this.getTriggerElement()),this._customTargetClass=this.$target.attr("class")!==p?this.$target.attr("class"):null,this.getTriggerElement().attr("data-target",t)}return this.$target},getTitleElement:function(){return this.getTarget().find("."+p+"-title")},getContentElement:function(){return this.$contentElement||(this.$contentElement=this.getTarget().find("."+p+"-content")),this.$contentElement},getTitle:function(){return this.$element.attr("data-title")||this.options.title||this.$element.attr("title")},getUrl:function(){return this.$element.attr("data-url")||this.options.url},getAutoHide:function(){return this.$element.attr("data-auto-hide")||this.options.autoHide},getOffsetTop:function(){return h(this.$element.attr("data-offset-top"))||this.options.offsetTop},getOffsetLeft:function(){return h(this.$element.attr("data-offset-left"))||this.options.offsetLeft},getCache:function(){var t=this.$element.attr("data-cache");if(void 0!==t)switch(t.toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":return!1}return this.options.cache},getTrigger:function(){return this.$element.attr("data-trigger")||this.options.trigger},getDelayShow:function(){var t=this.$element.attr("data-delay-show");return void 0!==t?t:0===this.options.delay.show?0:this.options.delay.show||100},getHideDelay:function(){var t=this.$element.attr("data-delay-hide");return void 0!==t?t:0===this.options.delay.hide?0:this.options.delay.hide||100},getAnimation:function(){return this.$element.attr("data-animation")||this.options.animation},getHideAnimation:function(){var t=this.getAnimation();return t?t+"-out":"out"},setTitle:function(t){var e=this.getTitleElement();t?e.html(t):e.remove()},hasContent:function(){return this.getContent()},getContent:function(){if(this.getUrl())switch(this.options.type){case"iframe":this.content=c('<iframe frameborder="0"></iframe>').attr("src",this.getUrl());break;case"html":try{this.content=c(this.getUrl()),this.content.is(":visible")||this.content.show()}catch(t){throw new Error("Unable to get popover content. Invalid selector specified.")}}else if(!this.content){var t="";if(t=c.isFunction(this.options.content)?this.options.content.apply(this.$element[0],[this]):this.options.content,this.content=this.$element.attr("data-content")||t,!this.content){var e=this.$element.next();e&&e.hasClass(p+"-content")&&(this.content=e)}}return this.content},setContent:function(t){var e=this.getTarget(),i=this.getContentElement();"string"==typeof t?i.html(t):t instanceof jQuery&&(t.removeClass(p+"-content"),i.html(""),t.appendTo(i)),this.$target=e},isAsync:function(){return"async"===this.options.type},setContentASync:function(e){var i=this;this.xhr||(this.xhr=c.ajax({url:this.getUrl(),type:"GET",cache:this.getCache(),beforeSend:function(t){i.options.async.before&&i.options.async.before(i,t)},success:function(t){i.bindBodyEvents(),e&&c.isFunction(e)?i.content=e.apply(i.$element[0],[t]):i.content=t,i.setContent(i.content),i.getContentElement().removeAttr("style"),i.displayContent(),i.options.async.success&&i.options.async.success(i,t)},complete:function(){i.xhr=null}}))},bindBodyEvents:function(){this.options.dismissible&&"click"===this.getTrigger()&&!g&&(n.off("keyup.webui-popover").on("keyup.webui-popover",c.proxy(this.escapeHandler,this)),n.off("click.webui-popover touchend.webui-popover").on("click.webui-popover touchend.webui-popover",c.proxy(this.bodyClickHandler,this)))},mouseenterHandler:function(){var t=this;t._timeout&&clearTimeout(t._timeout),t._enterTimeout=setTimeout(function(){t.getTarget().is(":visible")||t.show()},this.getDelayShow())},mouseleaveHandler:function(){var t=this;clearTimeout(t._enterTimeout),t._timeout=setTimeout(function(){t.hide()},this.getHideDelay())},escapeHandler:function(t){27===t.keyCode&&this.hideAll()},bodyClickHandler:function(t){for(var e=g=!0,i=0;i<l.length;i++){var o=l[i].data("plugin_"+a);if(o._opened){var s=o.getTarget().offset().left,n=o.getTarget().offset().top,h=o.getTarget().offset().left+o.getTarget().width(),r=o.getTarget().offset().top+o.getTarget().height();if(t.pageX>=s&&t.pageX<=h&&t.pageY>=n&&t.pageY<=r){e=!1;break}}}e&&d()},initTargetEvents:function(){"hover"===this.getTrigger()&&this.$target.off("mouseenter mouseleave").on("mouseenter",c.proxy(this.mouseenterHandler,this)).on("mouseleave",c.proxy(this.mouseleaveHandler,this)),this.$target.find(".close").off("click").on("click",c.proxy(this.hide,this,!0))},getPlacement:function(t){var e,i=H.documentElement,o=H.body,s=i.clientWidth,n=i.clientHeight,h=Math.max(o.scrollTop,i.scrollTop),r=Math.max(o.scrollLeft,i.scrollLeft),a=Math.max(0,t.left-r),l=Math.max(0,t.top-h),c="horizontal"===(e="function"==typeof this.options.placement?this.options.placement.call(this,this.getTarget()[0],this.$element[0]):this.$element.data("placement")||this.options.placement),p="vertical"===e;return"auto"===e||c||p?e=a<s/3?l<n/3?c?"right-bottom":"bottom-right":l<2*n/3?p?l<=n/2?"bottom-right":"top-right":"right":c?"right-top":"top-right":a<2*s/3?l<n/3?c?a<=s/2?"right-bottom":"left-bottom":"bottom":l<2*n/3?c?a<=s/2?"right":"left":l<=n/2?"bottom":"top":c?a<=s/2?"right-top":"left-top":"top":l<n/3?c?"left-bottom":"bottom-left":l<2*n/3?p?l<=n/2?"bottom-left":"top-left":"left":c?"left-top":"top-left":"auto-top"===e?e=a<s/3?"top-right":a<2*s/3?"top":"top-left":"auto-bottom"===e?e=a<s/3?"bottom-right":a<2*s/3?"bottom":"bottom-left":"auto-left"===e?e=l<n/3?"left-top":l<2*n/3?"left":"left-bottom":"auto-right"===e&&(e=l<n/3?"right-top":l<2*n/3?"right":"right-bottom"),e},getElementPosition:function(){return c.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTargetPositin:function(t,e,i,o){var s=t,n=H.documentElement,h=H.body,r=n.clientWidth,a=n.clientHeight,l=this.$element.outerWidth(),c=this.$element.outerHeight(),p=Math.max(h.scrollTop,n.scrollTop),f=Math.max(h.scrollLeft,n.scrollLeft),g={},d=null,u=this.options.arrow?20:0,m=l<u+10?u:0,v=c<u+10?u:0,b=0,y=a+p,w=r+f,T=0<s.left+s.width/2-m,$=s.left+s.width/2+m<w,C=0<s.top+s.height/2-v,k=s.top+s.height/2+v<y;switch(e){case"bottom":g={top:s.top+s.height,left:s.left+s.width/2-i/2};break;case"top":g={top:s.top-o,left:s.left+s.width/2-i/2};break;case"left":g={top:s.top+s.height/2-o/2,left:s.left-i};break;case"right":g={top:s.top+s.height/2-o/2,left:s.left+s.width};break;case"top-right":g={top:s.top-o,left:T?s.left-m:10},d={left:T?Math.min(l,i)/2+m:_};break;case"top-left":b=$?m:-10,g={top:s.top-o,left:s.left-i+s.width+b},d={left:$?i-Math.min(l,i)/2-m:_};break;case"bottom-right":g={top:s.top+s.height,left:T?s.left-m:10},d={left:T?Math.min(l,i)/2+m:_};break;case"bottom-left":b=$?m:-10,g={top:s.top+s.height,left:s.left-i+s.width+b},d={left:$?i-Math.min(l,i)/2-m:_};break;case"right-top":b=k?v:-10,g={top:s.top-o+s.height+b,left:s.left+s.width},d={top:k?o-Math.min(c,o)/2-v:_};break;case"right-bottom":g={top:C?s.top-v:10,left:s.left+s.width},d={top:C?Math.min(c,o)/2+v:_};break;case"left-top":b=k?v:-10,g={top:s.top-o+s.height+b,left:s.left-i},d={top:k?o-Math.min(c,o)/2-v:_};break;case"left-bottom":g={top:C?s.top-v:10,left:s.left-i},d={top:C?Math.min(c,o)/2+v:_}}return g.top+=this.getOffsetTop(),g.left+=this.getOffsetLeft(),{position:g,arrowOffset:d}}},c.fn[a]=function(e,i){var o=[],t=this.each(function(){var t=c.data(this,"plugin_"+a);t?"destroy"===e?t.destroy():"string"==typeof e&&o.push(t[e]()):(e?"string"==typeof e?"destroy"!==e&&(i||(t=new r(this,null),o.push(t[e]()))):"object"==typeof e&&(t=new r(this,e)):t=new r(this,null),c.data(this,"plugin_"+a,t))});return o.length?o:t}}(jQuery,window,document);